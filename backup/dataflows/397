{
  "packagePublicationId" : "e46de7e1bcaaced9a54f1e9d0d2f800d",
  "domain" : "custom-emea.domo.com",
  "definitions" : [ {
    "id" : null,
    "publicationId" : "aef7c4d4-8c2d-4599-b581-ea6db5cb0274",
    "contentType" : "DATAFLOW",
    "definition" : "{\"id\":397,\"name\":\"MC Twitter ETL\",\"databaseType\":\"ETL\",\"dapDataFlowId\":\"etl-08c2cc6f-d883-4c9b-93a6-35b1682f478e\",\"responsibleUserId\":1179545776,\"runState\":\"ENABLED\",\"onboardFlowVersion\":{\"id\":1804,\"timeStamp\":1578045438000,\"authorId\":1179545776,\"numInputs\":2,\"numOutputs\":1,\"executionCount\":0,\"executionSuccessCount\":0,\"versionNumber\":5},\"lastExecution\":{\"id\":82623,\"onboardFlowId\":397,\"previewRows\":0,\"dapDataFlowExecutionId\":\"7a91c0fb-24e9-4d05-ade1-7108a799e5e8\",\"beginTime\":1618297295000,\"endTime\":1618298983000,\"lastUpdated\":1618298983000,\"failed\":false,\"state\":\"SUCCESS\",\"dataFlowVersion\":0},\"created\":1573487426000,\"modified\":1578045437000,\"numInputs\":2,\"numOutputs\":1,\"actions\":[{\"type\":\"LoadFromVault\",\"type\":\"LoadFromVault\",\"id\":\"72976a3f-627e-4a66-bfc5-b11cd4242c0f\",\"name\":\"Twitter @ManCity\",\"gui\":{\"x\":48,\"y\":48,\"color\":null},\"dataSourceId\":\"fe621019-5a9f-4d5f-a340-b405f036e1b2\",\"executeFlowWhenUpdated\":true,\"pseudoDataSource\":false,\"truncateTextColumns\":false,\"truncateRows\":false,\"onlyLoadNewVersions\":false,\"recentVersionCutoffMs\":0},{\"type\":\"LoadFromVault\",\"type\":\"LoadFromVault\",\"id\":\"4dbe8972-fb79-412b-b04d-1667148f7271\",\"name\":\"Twitter ManCity 2\",\"gui\":{\"x\":48,\"y\":204,\"color\":null},\"dataSourceId\":\"55ec0c55-64f6-435c-b55e-8dfca5c9e730\",\"executeFlowWhenUpdated\":true,\"pseudoDataSource\":false,\"truncateTextColumns\":false,\"truncateRows\":false,\"onlyLoadNewVersions\":false,\"recentVersionCutoffMs\":0},{\"type\":\"UnionAll\",\"type\":\"UnionAll\",\"id\":\"6853dd97-af8b-42fe-b423-289fc9db82e9\",\"name\":\"Append Rows\",\"dependsOn\":[\"72976a3f-627e-4a66-bfc5-b11cd4242c0f\",\"4dbe8972-fb79-412b-b04d-1667148f7271\"],\"gui\":{\"x\":168,\"y\":48,\"color\":null},\"unionType\":\"INCLUDE_MATCHES\",\"strict\":false},{\"type\":\"Filter\",\"type\":\"Filter\",\"id\":\"b0ded15d-2519-4f53-8433-f2d6e3223157\",\"name\":\"Filter out non hastags\",\"dependsOn\":[\"6853dd97-af8b-42fe-b423-289fc9db82e9\"],\"gui\":{\"x\":264,\"y\":48,\"color\":null},\"filterList\":[{\"leftField\":\"Text\",\"rightField\":null,\"rightValue\":{\"value\":\"#\",\"type\":\"STRING\"},\"rightExpr\":null,\"operator\":\"CT\",\"expression\":null,\"andFilterList\":[]}]},{\"type\":\"Unique\",\"type\":\"Unique\",\"id\":\"f6312b5e-8add-4e3c-b320-27e346e97048\",\"name\":\"Remove duplicate tweets\",\"dependsOn\":[\"b0ded15d-2519-4f53-8433-f2d6e3223157\"],\"gui\":{\"x\":360,\"y\":48,\"color\":null},\"countRows\":false,\"fields\":[{\"name\":\"Text\",\"caseInsensitive\":false}]},{\"type\":\"PythonEngineAction\",\"type\":\"PythonEngineAction\",\"id\":\"93044c21-bc95-47f6-a04d-689442d0ddab\",\"name\":\"Python Script\",\"dependsOn\":[\"f6312b5e-8add-4e3c-b320-27e346e97048\"],\"gui\":{\"x\":504,\"y\":216,\"color\":null},\"removeByDefault\":true,\"script\":\"#This script has been written in order to split out tweets to identify the things that people are talking about the most\\n\\n#Import the domomagic and pandas package into the script \\nfrom domomagic import *\\nimport pandas as pd\\n\\n#read data from inputs into a data frame\\ntwitter_raw_df = read_dataframe('Remove duplicate tweets')\\n\\n#select only the columns we want to use for speed\\ntwitter_df=twitter_raw_df[['Id','Text']]\\n\\n# Create a new dataframe with exploded/split columns into multiple rows\\ntwitter_split_df=pd.DataFrame(twitter_df.Text.str.split(' ').tolist(),index=twitter_df.Id).stack()\\ntwitter_split_df=twitter_split_df.reset_index([0,'Id'])\\ntwitter_split_df.columns=['Id','Text']\\n\\n\\n# write a data frame so it's available to the next action\\nwrite_dataframe(twitter_split_df)\",\"additions\":[{\"name\":\"Id\",\"dataType\":\"LONG\"},{\"name\":\"Text\",\"dataType\":\"STRING\"}],\"fillMissingWithNull\":true},{\"type\":\"SelectValues\",\"type\":\"SelectValues\",\"id\":\"b69e2f6d-862d-4c3d-8f13-5a1ecab9f8c4\",\"name\":\"Select Columns\",\"dependsOn\":[\"f6312b5e-8add-4e3c-b320-27e346e97048\"],\"gui\":{\"x\":504,\"y\":48,\"color\":null},\"fields\":[{\"name\":\"Id\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Text\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Created At\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"User Id\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Retweet Count\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Favorite Count\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null}]},{\"type\":\"MergeJoin\",\"type\":\"MergeJoin\",\"id\":\"6d04ce71-def7-458c-8b7e-bfd9761514b7\",\"name\":\"Join Data\",\"dependsOn\":[\"b69e2f6d-862d-4c3d-8f13-5a1ecab9f8c4\",\"93044c21-bc95-47f6-a04d-689442d0ddab\"],\"gui\":{\"x\":684,\"y\":48,\"color\":null},\"joinType\":\"LEFT OUTER\",\"step1\":\"b69e2f6d-862d-4c3d-8f13-5a1ecab9f8c4\",\"step2\":\"93044c21-bc95-47f6-a04d-689442d0ddab\",\"keys1\":[\"Id\"],\"keys2\":[\"Id\"]},{\"type\":\"SelectValues\",\"type\":\"SelectValues\",\"id\":\"538214b2-ab57-4dc7-aba7-55a0b3c4a538\",\"name\":\"Rename\",\"dependsOn\":[\"6d04ce71-def7-458c-8b7e-bfd9761514b7\"],\"gui\":{\"x\":828,\"y\":48,\"color\":null},\"fields\":[{\"name\":\"Id\",\"rename\":\"Tweet_Id\",\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Text\",\"rename\":\"Tweet\",\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Created At\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Text_1\",\"rename\":\"Individual_Text\",\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"User Id\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Retweet Count\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null},{\"name\":\"Favorite Count\",\"rename\":null,\"type\":null,\"dateFormat\":null,\"settings\":null,\"remove\":false,\"placement\":null,\"placementColumn\":null}]},{\"type\":\"Unique\",\"type\":\"Unique\",\"id\":\"176e5472-6cd3-4d7e-9f2c-0b70ebddbb95\",\"name\":\"Remove Duplicates\",\"dependsOn\":[\"538214b2-ab57-4dc7-aba7-55a0b3c4a538\"],\"gui\":{\"x\":960,\"y\":48,\"color\":null},\"countRows\":false,\"fields\":[{\"name\":\"Tweet_Id\",\"caseInsensitive\":false},{\"name\":\"Individual_Text\",\"caseInsensitive\":false}]},{\"type\":\"Filter\",\"type\":\"Filter\",\"id\":\"9fb931f5-8cd8-4706-b76c-ac00ef984d6a\",\"name\":\"Filter out Websummit hashtags\",\"dependsOn\":[\"176e5472-6cd3-4d7e-9f2c-0b70ebddbb95\"],\"gui\":{\"x\":1092,\"y\":48,\"color\":null},\"filterList\":[{\"leftField\":\"Individual_Text\",\"rightField\":null,\"rightValue\":{\"value\":\"@ManCity\",\"type\":\"STRING\"},\"rightExpr\":null,\"operator\":\"NC\",\"expression\":null,\"andFilterList\":[]}]},{\"type\":\"Filter\",\"type\":\"Filter\",\"id\":\"87158bcc-7f6a-4440-905a-abadc3b1492e\",\"name\":\"Filter out non hastags 1\",\"dependsOn\":[\"9fb931f5-8cd8-4706-b76c-ac00ef984d6a\"],\"gui\":{\"x\":1224,\"y\":48,\"color\":null},\"filterList\":[{\"leftField\":\"Individual_Text\",\"rightField\":null,\"rightValue\":{\"value\":\"#\",\"type\":\"STRING\"},\"rightExpr\":null,\"operator\":\"CT\",\"expression\":null,\"andFilterList\":[]}]},{\"type\":\"Metadata\",\"type\":\"Metadata\",\"id\":\"79e42c31-7b14-4d6a-a242-964059e7ae64\",\"name\":\"Set Column Type\",\"dependsOn\":[\"87158bcc-7f6a-4440-905a-abadc3b1492e\"],\"gui\":{\"x\":1344,\"y\":48,\"color\":null},\"fields\":[{\"name\":\"Created At\",\"rename\":null,\"type\":\"DATE\",\"dateFormat\":\"DAY_FIRST\",\"settings\":{\"locale\":\"en_GB\"},\"remove\":false,\"placement\":null,\"placementColumn\":null}]},{\"type\":\"GroupBy\",\"type\":\"GroupBy\",\"id\":\"68b2f7f8-4dd7-48f9-b99e-bff3375f6ca9\",\"name\":\"Group By\",\"dependsOn\":[\"79e42c31-7b14-4d6a-a242-964059e7ae64\"],\"gui\":{\"x\":1464,\"y\":48,\"color\":null},\"addLineNumber\":false,\"giveBackRow\":false,\"allRows\":false,\"groups\":[{\"name\":\"Tweet\"},{\"name\":\"Individual_Text\"},{\"name\":\"Created At\"}],\"fields\":[{\"name\":\"Retweets\",\"source\":\"Retweet Count\",\"type\":\"SUM\",\"valuefield\":null,\"expression\":null,\"settings\":null},{\"name\":\"Favourites\",\"source\":\"Favorite Count\",\"type\":\"SUM\",\"valuefield\":null,\"expression\":null,\"settings\":null}]},{\"type\":\"Normalizer\",\"type\":\"Normalizer\",\"id\":\"7be59f69-2409-4e6c-963b-79c848990f46\",\"name\":\"Collapse Columns\",\"dependsOn\":[\"68b2f7f8-4dd7-48f9-b99e-bff3375f6ca9\"],\"gui\":{\"x\":1584,\"y\":48,\"color\":null},\"typefield\":\"Metric\",\"fields\":[{\"sourceField\":\"Retweets\",\"typefieldValue\":\"Retweets\",\"destField\":\"Value\"},{\"sourceField\":\"Favourites\",\"typefieldValue\":\"Favourites\",\"destField\":\"Value\"}]},{\"type\":\"PublishToVault\",\"type\":\"PublishToVault\",\"id\":\"d5e2fa67-6599-4ff9-8930-987321612bd7\",\"name\":\"Twitter_ManCity_Post-ETL\",\"dependsOn\":[\"7be59f69-2409-4e6c-963b-79c848990f46\"],\"gui\":{\"x\":1728,\"y\":48,\"color\":null},\"dataSource\":{\"guid\":\"576baa65-1186-458e-acb0-eadb6f8154d0\",\"type\":\"DataFlow\",\"name\":\"Twitter_ManCity_Post-ETL\"},\"versionChainType\":\"REPLACE\",\"schemaSource\":\"DATAFLOW\"}],\"inputs\":[{\"dataSourceId\":\"55ec0c55-64f6-435c-b55e-8dfca5c9e730\",\"executeFlowWhenUpdated\":true,\"dataSourceName\":\"Twitter ManCity 2\",\"onlyLoadNewVersions\":false,\"recentVersionCutoffMs\":0},{\"dataSourceId\":\"fe621019-5a9f-4d5f-a340-b405f036e1b2\",\"executeFlowWhenUpdated\":true,\"dataSourceName\":\"Twitter @ManCity\",\"onlyLoadNewVersions\":false,\"recentVersionCutoffMs\":0}],\"outputs\":[{\"onboardFlowId\":null,\"dataSourceId\":\"576baa65-1186-458e-acb0-eadb6f8154d0\",\"dataSourceName\":\"Twitter_ManCity_Post-ETL\",\"versionChainType\":\"REPLACE\"}],\"executionCount\":1042,\"executionSuccessCount\":1040,\"hydrationState\":\"DEHYDRATED\",\"useLegacyTriggerBehavior\":false,\"passwordProtected\":false,\"deleted\":false,\"abandoned\":false,\"neverAbandon\":false,\"enabled\":true,\"restricted\":false,\"draft\":false,\"editable\":true,\"magic\":false,\"triggeredByInput\":true}",
    "created" : null,
    "updated" : null
  } ]
}